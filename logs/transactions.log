{"timestamp": "2025-12-21T02:52:08.527234", "level": "\u001b[32mINFO\u001b[0m", "message": "Payment request received", "module": "payment", "function": "create_payment", "line": 426, "order_id": "ORD-4506D57A"}
{"timestamp": "2025-12-21T02:52:08.529117", "level": "\u001b[32mINFO\u001b[0m", "message": "Payment processing initiated for order", "module": "payment", "function": "create_payment", "line": 440, "order_id": "ORD-4506D57A"}
{"timestamp": "2025-12-21T02:53:20.583826", "level": "\u001b[32mINFO\u001b[0m", "message": "Payment request received", "module": "payment", "function": "create_payment", "line": 426, "order_id": "CART-04A53CFF"}
{"timestamp": "2025-12-21T02:53:20.584822", "level": "\u001b[32mINFO\u001b[0m", "message": "Payment processing initiated for order", "module": "payment", "function": "create_payment", "line": 440, "order_id": "CART-04A53CFF"}
{"timestamp": "2025-12-21T02:53:21.160623", "level": "\u001b[31mERROR\u001b[0m", "message": "Stripe Invalid Request: Request req_PR0K03RlIJqkab: The token tok_1SgjIoHxKDaqjWchOkxxqujA has already been used. Each token can only be used once to create a source.", "module": "payment", "function": "create_payment", "line": 812, "order_id": "CART-04A53CFF", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\24520\\OneDrive\\Máy tính\\Clone\\NT219.Q11.ATTN-13\\backend\\services\\payment_service\\payment.py\", line 671, in create_payment\n    intent = stripe.PaymentIntent.create(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\24520\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\stripe\\_payment_intent.py\", line 3644, in create\n    cls._static_request(\n  File \"C:\\Users\\24520\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\stripe\\_api_resource.py\", line 172, in _static_request\n    return _APIRequestor._global_instance().request(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\24520\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\stripe\\_api_requestor.py\", line 201, in request\n    resp = requestor._interpret_response(rbody, rcode, rheaders, api_mode)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\24520\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\stripe\\_api_requestor.py\", line 859, in _interpret_response\n    self.handle_error_response(\n  File \"C:\\Users\\24520\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\stripe\\_api_requestor.py\", line 342, in handle_error_response\n    raise err\nstripe._error.InvalidRequestError: Request req_PR0K03RlIJqkab: The token tok_1SgjIoHxKDaqjWchOkxxqujA has already been used. Each token can only be used once to create a source."}
